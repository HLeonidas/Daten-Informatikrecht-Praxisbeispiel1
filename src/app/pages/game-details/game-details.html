<section class="py-6">
	<!-- Breadcrumb -->
	<nav aria-label="Breadcrumb" class="mb-6 text-sm">
		<ol class="flex flex-wrap items-center gap-2 text-gray-600">
			<li>
				<a routerLink="/"
					class="rounded hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-600">
					Home
				</a>
			</li>
			<li aria-hidden="true" class="text-gray-400">/</li>
			<li>
				<a routerLink="/catalog"
					class="rounded hover:underline focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-600">
					Katalog
				</a>
			</li>
			<li aria-hidden="true" class="text-gray-400">/</li>
			<li class="text-gray-900">
				Details
			</li>
		</ol>
	</nav>

	@if (!game) {
	<div class="rounded-2xl border border-gray-200 bg-white p-8 shadow-sm" role="alert" aria-live="polite">
		<h1 class="text-xl font-semibold text-gray-900">Spiel nicht gefunden</h1>
		<p class="mt-2 text-sm text-gray-600">
			Dieses Spiel existiert in den Mock-Daten nicht. Bitte gehe zurück zum Katalog.
		</p>
		<a routerLink="/catalog"
			class="mt-5 inline-flex items-center justify-center rounded-lg bg-indigo-600 px-5 py-3 text-sm font-semibold text-white
               hover:bg-indigo-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-600 focus-visible:ring-offset-2">
			Zurück zum Katalog
		</a>
	</div>
	} @else {
	<header class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
		<!-- Cover: max height 600px -->
		<img [src]="game.coverSrc" [alt]="game.coverAlt"
			class="mt-2 mb-4 w-full rounded-2xl border border-gray-200 bg-gray-50 object-cover max-h-[600px]" />

		@if (game.coverNote) {
		<p class="-mt-2 mb-4 text-xs text-gray-500">
			{{ game.coverNote }}
		</p>
		}

		<div class="flex flex-col gap-4 sm:flex-row sm:items-start sm:justify-between">
			<div>
				<h1 class="text-3xl font-semibold tracking-tight text-gray-900 sm:text-4xl">
					{{ game.title }}
				</h1>

				<!-- Genres + badges -->
				<div class="mt-3 flex flex-wrap items-center gap-2">
					@for (g of game.genres; track g) {
					<span class="rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-700">
						{{ g }}
					</span>
					}

					@if (game.isNew) {
					<span class="rounded-full bg-indigo-50 px-2 py-0.5 text-xs font-semibold text-indigo-700">
						Neu
					</span>
					}

					@if (game.cloud) {
					<span class="rounded-full bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-700">
						Cloud
					</span>
					}

					<span class="ml-1 flex items-center gap-1 text-sm text-gray-700" aria-label="Bewertung">
						@for (s of stars(game.rating); track $index) {
						<span aria-hidden="true">{{ s ? '★' : '☆' }}</span>
						}
						<span class="ml-2 text-xs text-gray-600">{{ game.rating.toFixed(1) }}</span>
					</span>
				</div>

				<!-- Publisher / Release year -->
				<div class="mt-3 flex flex-wrap gap-x-4 gap-y-1 text-sm text-gray-600">
					@if (game.publisher) {
					<span><span class="font-medium text-gray-700">Publisher:</span> {{ game.publisher }}</span>
					}
					@if (game.releaseYear) {
					<span><span class="font-medium text-gray-700">Release:</span> {{ game.releaseYear }}</span>
					}
				</div>

				<p class="mt-4 max-w-prose text-sm text-gray-600">
					{{ game.longDescription }}
				</p>
			</div>

			<div class="flex flex-col gap-3 sm:min-w-[220px]">
				<a routerLink="/subscribe"
					class="inline-flex items-center justify-center rounded-lg bg-indigo-600 px-4 py-3 text-sm font-semibold text-white
                   hover:bg-indigo-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-600 focus-visible:ring-offset-2">
					Im Abo enthalten
				</a>

				<a routerLink="/pricing"
					class="inline-flex items-center justify-center rounded-lg border border-gray-300 bg-white px-4 py-3 text-sm font-semibold text-gray-900
                   hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-600 focus-visible:ring-offset-2">
					Preise ansehen
				</a>

				<p class="text-xs text-gray-500">
					Hinweis: Mock-Daten. Kein echter Kauf/Streaming.
				</p>
			</div>
		</div>
	</header>

	<div class="mt-6 grid gap-6 lg:grid-cols-3">
		<!-- Left: Details -->
		<section class="lg:col-span-2 rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
			<h2 class="text-lg font-semibold text-gray-900">Highlights</h2>

			<ul class="mt-4 space-y-2 text-sm text-gray-700">
				@for (f of game.features; track f) {
				<li class="flex items-start gap-2">
					<span aria-hidden="true" class="mt-0.5">✅</span>
					<span>{{ f }}</span>
				</li>
				}
			</ul>

			<h2 class="mt-8 text-lg font-semibold text-gray-900">Kurzbeschreibung</h2>
			<p class="mt-2 text-sm text-gray-600">
				{{ game.description }}
			</p>

			<h2 class="mt-8 text-lg font-semibold text-gray-900">Details</h2>
			<dl class="mt-3 grid gap-3 sm:grid-cols-2 text-sm">
				<div class="rounded-xl border border-gray-200 bg-gray-50 p-4">
					<dt class="text-xs font-semibold text-gray-700">Cloud</dt>
					<dd class="mt-1 text-sm text-gray-900">{{ game.cloud ? 'Ja' : 'Nein' }}</dd>
				</div>

				<div class="rounded-xl border border-gray-200 bg-gray-50 p-4">
					<dt class="text-xs font-semibold text-gray-700">Neu</dt>
					<dd class="mt-1 text-sm text-gray-900">{{ game.isNew ? 'Ja' : 'Nein' }}</dd>
				</div>

				@if (game.publisher) {
				<div class="rounded-xl border border-gray-200 bg-gray-50 p-4">
					<dt class="text-xs font-semibold text-gray-700">Publisher</dt>
					<dd class="mt-1 text-sm text-gray-900">{{ game.publisher }}</dd>
				</div>
				}

				@if (game.releaseYear) {
				<div class="rounded-xl border border-gray-200 bg-gray-50 p-4">
					<dt class="text-xs font-semibold text-gray-700">Release Jahr</dt>
					<dd class="mt-1 text-sm text-gray-900">{{ game.releaseYear }}</dd>
				</div>
				}

				<div class="rounded-xl border border-gray-200 bg-gray-50 p-4 sm:col-span-2">
					<dt class="text-xs font-semibold text-gray-700">Genres</dt>
					<dd class="mt-2 flex flex-wrap gap-2">
						@for (g of game.genres; track g) {
						<span
							class="rounded-full bg-white px-2 py-1 text-xs font-medium text-gray-700 border border-gray-200">
							{{ g }}
						</span>
						}
					</dd>
				</div>
			</dl>

			<div class="mt-8 rounded-xl border border-gray-200 bg-gray-50 p-4">
				<h3 class="text-sm font-semibold text-gray-900">Rechtlicher Hinweis</h3>
				<p class="mt-1 text-sm text-gray-600">
					Dieses Produktlisting ist Teil eines Studienprojekts. Inhalte sind gemockt; es findet keine echte
					Lizenzübertragung oder Bezahlung statt.
				</p>
				<p class="mt-2 text-xs text-gray-500">
					Hinweis zu Covern: Es werden Mock-Cover genutzt, keine offiziellen Artworks. Siehe „Urheberrecht
					&amp; Lizenzen“.
				</p>
			</div>
		</section>

		<!-- Right: Tags / Info -->
		<aside class="rounded-2xl border border-gray-200 bg-white p-6 shadow-sm">
			<h2 class="text-base font-semibold text-gray-900">Tags</h2>

			<div class="mt-4 flex flex-wrap gap-2">
				@for (t of game.tags; track t) {
				<span class="rounded-full bg-gray-100 px-2 py-1 text-xs font-medium text-gray-700">
					{{ t }}
				</span>
				}
			</div>

			<div class="mt-6 border-t border-gray-200 pt-6">
				<h2 class="text-base font-semibold text-gray-900">Mehr entdecken</h2>
				<a routerLink="/catalog"
					class="mt-3 inline-flex w-full items-center justify-center rounded-lg border border-gray-300 bg-white px-4 py-3 text-sm font-semibold text-gray-900
                   hover:bg-gray-50 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-600 focus-visible:ring-offset-2">
					Zurück zum Katalog
				</a>
			</div>
		</aside>
	</div>
	}
</section>